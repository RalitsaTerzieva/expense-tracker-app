{% extends 'trackerapp/base.html' %}
{% load humanize %}
{% load static %}
        
{% block content %}
<div class='font-bold text-2xl pl-10 pt-4'>Add Expense âž•</div>
    <form method="POST" class='shadow-lg m-10 rounded-lg bg-yellow-200'>
        {% csrf_token %}
        <div class='form-container px-10 py-10 flex'>
            <div class='mx-10'>
                <div class='mb-5'>
                    <label class='font-semibold'>Expense Name</label>
                </div>
                <div class='border'>
                    {{ expense_form.name }}
                </div>
            </div>
            <div class='mx-10'>
                <div class='mb-5'>
                    <label class='font-semibold'>Amount</label>
                </div>
                <div class='border'>
                    {{ expense_form.amount }}
                </div>
            </div>
            <div class='mx-10'>
                <div class='mb-5'>
                    <label class='font-semibold'>Category</label>
                </div>
                <div class='border'>
                    {{ expense_form.category }}
                </div>
            </div>
            <div class='mx-10 mt-8'>
               <button class='bg-green-500 text-white px-5 py-2 rounded-lg font-bold'>Add</button>
            </div>
        </div>   
        </form>
        <div class='font-bold text-2xl pl-10'>Expenses ðŸ’°</div>
        <div class='shadow-lg m-10 rounded-lg divide-y'>
            <div class='expense-header flex flex-wrap space-x-40 py-5 px-20'>
                <span class='text-xl font-semibold font-mono text-yellow-800'>Name</span>
                <span class='text-xl font-semibold font-mono text-yellow-800'>Amount</span>
                <span class='text-xl font-semibold font-mono text-yellow-800'>Category</span>
                <span class='text-xl font-semibold font-mono text-yellow-800'>Date</span>
                <span class='text-xl font-semibold font-mono text-yellow-800'>Actions</span>
            </div>
            {% for expense in expenses %}
            <div class='expense-row flex flex-wrap px-20 py-5'>
                <span class='font-bold'>{{ expense.name }}</span>
                <span class='font-bold'>${{ expense.amount|intcomma}}</span>
                <span class='font-bold'>{{ expense.category }}</span>
                <span class='font-bold '>{{ expense.date }}</span>
                <div class="flex place-content-center gap-3">
                    <span class='bg-green-500 p-2'><a href='{% url "edit" expense.id %}'><img class='w-5 h-5' src='{% static "trackerapp/images/edit.png" %}'></a></span>
                    <span class='bg-red-500 p-2'><a href='{% url "expense_delete" expense.pk %}'><img class='w-5 h-5' src='{% static "trackerapp/images/delete.png" %}'></a></span>
                </div>
               
            </div>
            {% endfor %}
            <div class='px-72 py-5'>
                <span class='font-bold text-yellow-800'>
                    Total: ${{ total_expenses.amount__sum|intcomma }}
                </span>
            </div>
        </div>  

        <div class='flex'>
            <div class='w-1/3 shadow-lg ml-10 rounded-lg'>
                <h1 class='ml-10 font-bold text-gray-500'>Last Year</h1>
                <h1 class='ml-10 my-5 text-2xl font-bold text-yellow-800'>
                    ${{ yearly_sum.amount__sum|intcomma }}
                </h1>
            </div>
            <div class='w-1/3 shadow-lg ml-10 rounded-lg'>
                <h1 class='ml-10 font-bold text-gray-500'>Last Month</h1>
                <h1 class='ml-10 my-5 text-2xl font-bold text-yellow-800'>
                    ${{ monthly_sum.amount__sum|intcomma }}
                </h1>
            </div>
            <div class='w-1/3 shadow-lg ml-10 rounded-lg'>
                <h1 class='ml-10 font-bold text-gray-500'>Last Week</h1>
                <h1 class='ml-10 my-5 text-2xl font-bold text-yellow-800'>
                    ${{ weekly_sum.amount__sum|intcomma }}
                </h1>
            </div>
        </div>

        <div class='flex'>
            <div class='w-1/2 shadow-lg m-10'>
                <div class='flex flex-wrap space-x-40 font-bold px-20 py-5'>
                    <span>Past 30 days sum expenses</span>
                </div>
                <hr/>
                <div id='30-day-table'>
                   {% for daily_sum in daily_sums %}
                   <div class='flex flex-wrap px-20 py-5'>
                    <span>{{ daily_sum.date }}</span>
                   </div>
                   <div class='flex flex-wrap px-20 py-5'>
                    <span class='text-yellow-800'>${{ daily_sum.sum|intcomma }}</span>
                   </div>
                   {% endfor %}
                </div>
            </div>
            <div class='w-1/2 shadow-lg m-10'>
                <div class='flex flex-wrap space-x-40 font-bold px-20 py-5'>
                    <span>Expenses by category</span>
                </div>
                <hr/>
                <div id='30-day-table'>
                   {% for categorical_sum in categorical_sums %}
                   <div class='flex flex-wrap px-20 py-5'>
                    <span class='font-semibold'>{{ categorical_sum.category }}</span>
                   </div>
                   <div class='flex flex-wrap px-20 py-5'>
                    <span class='text-yellow-800 font-semibold'>${{ categorical_sum.sum|intcomma }}</span>
                   </div>
                   {% endfor %}
                </div>
            </div>
        </div>
        
{% endblock %}
